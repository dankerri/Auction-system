{"ast":null,"code":"import _classCallCheck from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/dd/Desktop/nangua/frontend/src/content/container/public_component/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Route } from 'react-router-dom';\nimport { Button, Upload, Icon, message } from 'antd';\nimport { theUrl } from 'selfConfig'; // ==========================================================================================================\n// authorization situation\n// use this button to log out and direct to login page\n\nvar TheLogoutButton =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TheLogoutButton, _Component);\n\n  function TheLogoutButton(props) {\n    var _this;\n\n    _classCallCheck(this, TheLogoutButton);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TheLogoutButton).call(this, props));\n    _this.logout = _this.logout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TheLogoutButton, [{\n    key: \"logout\",\n    value: function logout() {\n      localStorage.removeItem('token');\n      localStorage.removeItem('level');\n      localStorage.removeItem('username');\n      localStorage.removeItem('id');\n      this.props.dispatch({\n        type: 'LOGOUT'\n      });\n    }\n  }, {\n    key: \"login\",\n    value: function login() {\n      console.log(\"redirect to login.\");\n      this.props.history.replace(\"/user_login\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.auth.logged) {\n        return React.createElement(Button, {\n          type: \"danger\",\n          onClick: this.logout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, \"Logout\");\n      } else {\n        return React.createElement(Button, {\n          type: \"danger\",\n          onClick: this.login,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, \"Login\");\n      }\n    }\n  }]);\n\n  return TheLogoutButton;\n}(Component);\n\nvar mapAuthToButton = function mapAuthToButton(state) {\n  return {\n    auth: state.auth\n  };\n};\n\nvar LogoutButton = connect(mapAuthToButton)(TheLogoutButton); // HOC, get url string from route\n\nvar PreRoute = function PreRoute(_ref) {\n  var match = _ref.match,\n      route = _ref.route;\n  return React.createElement(Route, {\n    path: \"\".concat(match.url) + route.path,\n    component: route.component,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  });\n}; // ==============================================================================================================================\n// profile\n// check if image exists, return true if exists\n\n\nfunction imageExists(image_url) {\n  var http = new XMLHttpRequest();\n  http.open('HEAD', image_url, false);\n  http.send();\n  return http.status != 404;\n}\n\nvar CheckImage = function CheckImage(_ref2) {\n  var url = _ref2.url;\n  var defaultUrl = theUrl + '/user/default.png';\n\n  if (imageExists(url)) {\n    return React.createElement(\"img\", {\n      src: url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    });\n  } else {\n    return React.createElement(\"img\", {\n      src: defaultUrl,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    });\n  }\n}; // ===================================================================================================================================\n// package all compoents\n\n\nexport { LogoutButton, PreRoute };","map":{"version":3,"sources":["/home/dd/Desktop/nangua/frontend/src/content/container/public_component/index.js"],"names":["React","Component","connect","Route","Button","Upload","Icon","message","theUrl","TheLogoutButton","props","logout","bind","localStorage","removeItem","dispatch","type","console","log","history","replace","auth","logged","login","mapAuthToButton","state","LogoutButton","PreRoute","match","route","url","path","component","imageExists","image_url","http","XMLHttpRequest","open","send","status","CheckImage","defaultUrl"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,IAAzB,EAA+BC,OAA/B,QAA8C,MAA9C;AAEA,SAASC,MAAT,QAAuB,YAAvB,C,CACA;AACA;AACA;;IACMC,e;;;;;AACF,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,yFAAMA,KAAN;AACA,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYC,IAAZ,uDAAd;AAFe;AAGlB;;;;6BAEQ;AACLC,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwB,UAAxB;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwB,IAAxB;AACA,WAAKJ,KAAL,CAAWK,QAAX,CAAoB;AAChBC,QAAAA,IAAI,EAAE;AADU,OAApB;AAGH;;;4BAEO;AACJC,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACA,WAAKR,KAAL,CAAWS,OAAX,CAAmBC,OAAnB,CAA2B,aAA3B;AACH;;;6BAEQ;AACL,UAAI,KAAKV,KAAL,CAAWW,IAAX,CAAgBC,MAApB,EAA6B;AACzB,eACI,oBAAC,MAAD;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,OAAO,EAAE,KAAKX,MAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ;AAKH,OAND,MAMO;AACH,eACI,oBAAC,MAAD;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,OAAO,EAAE,KAAKY,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ;AAKH;AACJ;;;;EAnCyBtB,S;;AAsC9B,IAAMuB,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK;AAAA,SAAK;AAC9BJ,IAAAA,IAAI,EAAEI,KAAK,CAACJ;AADkB,GAAL;AAAA,CAA7B;;AAGA,IAAMK,YAAY,GAAIxB,OAAO,CACzBsB,eADyB,CAAP,CAEpBf,eAFoB,CAAtB,C,CAKA;;AACA,IAAMkB,QAAQ,GAAG,SAAXA,QAAW;AAAA,MAAGC,KAAH,QAAGA,KAAH;AAAA,MAAUC,KAAV,QAAUA,KAAV;AAAA,SACb,oBAAC,KAAD;AACI,IAAA,IAAI,EAAE,UAAGD,KAAK,CAACE,GAAT,IAAeD,KAAK,CAACE,IAD/B;AAEI,IAAA,SAAS,EAAEF,KAAK,CAACG,SAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADa;AAAA,CAAjB,C,CAOA;AACA;AACA;;;AACA,SAASC,WAAT,CAAqBC,SAArB,EAA+B;AAE3B,MAAIC,IAAI,GAAG,IAAIC,cAAJ,EAAX;AAEAD,EAAAA,IAAI,CAACE,IAAL,CAAU,MAAV,EAAkBH,SAAlB,EAA6B,KAA7B;AACAC,EAAAA,IAAI,CAACG,IAAL;AAEA,SAAOH,IAAI,CAACI,MAAL,IAAe,GAAtB;AACH;;AACD,IAAMC,UAAU,GAAG,SAAbA,UAAa,QAAW;AAAA,MAATV,GAAS,SAATA,GAAS;AAE1B,MAAMW,UAAU,GAAGjC,MAAM,GAAC,mBAA1B;;AAEA,MAAIyB,WAAW,CAACH,GAAD,CAAf,EAAuB;AACnB,WAAO;AAAK,MAAA,GAAG,EAAEA,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH,GAFD,MAEO;AACH,WAAO;AAAK,MAAA,GAAG,EAAEW,UAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH;AACJ,CATD,C,CAYA;AACA;;;AACA,SACIf,YADJ,EAEIC,QAFJ","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Route } from 'react-router-dom'\nimport { Button, Upload, Icon, message } from 'antd'\n\nimport { theUrl } from 'selfConfig'\n// ==========================================================================================================\n// authorization situation\n// use this button to log out and direct to login page\nclass TheLogoutButton extends Component{\n    constructor(props) {\n        super(props)\n        this.logout = this.logout.bind(this)\n    }\n    \n    logout (){\n        localStorage.removeItem('token')\n        localStorage.removeItem('level')\n        localStorage.removeItem('username')\n        localStorage.removeItem('id')\n        this.props.dispatch({\n            type: 'LOGOUT'\n        })\n    }\n\n    login() {\n        console.log(\"redirect to login.\")\n        this.props.history.replace(\"/user_login\")\n    }\n\n    render() {\n        if( this.props.auth.logged ) {\n            return(\n                <Button type=\"danger\" onClick={this.logout}>\n                Logout\n                </Button>\n            )\n        } else {\n            return(\n                <Button type=\"danger\" onClick={this.login}>\n                Login\n                </Button>\n            )\n        }\n    }\n}\n\nconst mapAuthToButton = state => ({\n    auth: state.auth\n})\nconst LogoutButton =  connect(\n    mapAuthToButton\n)(TheLogoutButton)\n\n\n// HOC, get url string from route\nconst PreRoute = ({ match, route}) => (\n    <Route \n        path={`${match.url}`+route.path}\n        component={route.component}\n    />\n)\n\n// ==============================================================================================================================\n// profile\n// check if image exists, return true if exists\nfunction imageExists(image_url){\n\n    var http = new XMLHttpRequest();\n\n    http.open('HEAD', image_url, false);\n    http.send();\n\n    return http.status != 404;\n}\nconst CheckImage = ({url}) => {\n    \n    const defaultUrl = theUrl+'/user/default.png'\n    \n    if( imageExists(url) ) {\n        return(<img src={url} />)\n    } else {\n        return(<img src={defaultUrl} />)\n    } \n} \n \n\n// ===================================================================================================================================\n// package all compoents\nexport { \n    LogoutButton,\n    PreRoute,\n}\n"]},"metadata":{},"sourceType":"module"}