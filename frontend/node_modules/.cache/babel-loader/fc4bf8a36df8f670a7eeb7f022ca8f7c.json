{"ast":null,"code":"var _jsxFileName = \"/home/dd/Desktop/sell/frontend/src/content/container/user/userLogin.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { theUrl } from 'selfConfig';\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    login: function login(username, level, id) {\n      dispatch({\n        type: 'LOGIN',\n        username: username,\n        level: level,\n        id: id\n      });\n    }\n  };\n};\n\nvar Login = function Login(props) {\n  var username = '';\n  var password = '';\n\n  var login = function login(e) {\n    e.preventDefault();\n    var url = theUrl + \"/userLogin\";\n    fetch(url, {\n      headers: {\n        'Accept': 'appliction/json',\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify({\n        username: username.value,\n        password: password.value\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      // save token to redux\n      props.login(res.username, res.level, res.id); // save token at browser\n\n      localStorage.setItem('token', res.token);\n      localStorage.setItem('level', res.level);\n      localStorage.setItem('username', res.username);\n      localStorage.setItem('id', res.id);\n      props.history.replace(\"/user_profile\");\n    }).catch(function (e) {\n      alert(\"login failed, check your username or password\");\n    });\n  };\n\n  return React.createElement(\"form\", {\n    onSubmit: login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Back to home.\"), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"User Login\"), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"username\",\n    ref: function ref(input) {\n      return username = input;\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"password\",\n    ref: function ref(input) {\n      return password = input;\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }));\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/home/dd/Desktop/sell/frontend/src/content/container/user/userLogin.js"],"names":["React","connect","Link","theUrl","mapStateToProps","state","auth","mapDispatchToProps","dispatch","login","username","level","id","type","Login","props","password","e","preventDefault","url","fetch","headers","method","body","JSON","stringify","value","then","res","json","localStorage","setItem","token","history","replace","catch","alert","input"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { theUrl } from 'selfConfig'\n\nconst mapStateToProps = state => ({\n    auth: state.auth\n})\n\nconst mapDispatchToProps = dispatch => ({\n    login: (username, level, id) => {dispatch({\n        type: 'LOGIN',\n        username: username,\n        level: level,\n        id: id\n    })}\n})\n\nconst Login = (props) => {\n    let username = ''\n    let password = ''\n\n    var login = (e) => {\n        e.preventDefault()\n\n        const url=theUrl+\"/userLogin\"\n        fetch(url, {\n            headers: {\n                'Accept':'appliction/json',\n                'Content-Type':'application/json'\n            },\n            method: 'POST',\n            body: JSON.stringify({\n                username: username.value,\n                password: password.value\n            })\n        })\n        .then(res=> { return res.json() })\n        .then(res=> {\n\n            // save token to redux\n            props.login(res.username, res.level, res.id)\n\n            // save token at browser\n            localStorage.setItem('token', res.token)\n            localStorage.setItem('level', res.level)\n            localStorage.setItem('username', res.username)\n            localStorage.setItem('id', res.id)\n\n            props.history.replace(\"/user_profile\")\n\n        })\n        .catch(e=> {\n            alert(\"login failed, check your username or password\")\n        })\n    }\n    \n\n    return (\n        <form onSubmit={login} >\n            <Link to=\"/\">Back to home.</Link>\n            <h1>User Login</h1>\n            <label>\n                <input \n                type=\"text\" \n                placeholder=\"username\" \n                ref={ input => username = input }\n                />\n            </label>\n            <label>\n                <input \n                type=\"password\"\n                placeholder=\"password\"\n                ref={ input => password = input }\n                />\n            </label>\n            <input type=\"submit\" value=\"login\"/>\n        </form>\n    )\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Login)"]},"metadata":{},"sourceType":"module"}