{"ast":null,"code":"import _regeneratorRuntime from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(fetechHome),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchFetechHome),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchFetchProfile),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(fetchProfile),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(rootSaga);\n\nimport { put, takeEvery, all, call, take } from 'redux-saga/effects';\nimport { theUrl, tokenHeaders } from 'selfConfig';\nimport fetchData from './api'; // Fetch data generate list\n\nfunction fetechHome() {\n  var payload;\n  return _regeneratorRuntime.wrap(function fetechHome$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return call(fetchData);\n\n        case 2:\n          payload = _context.sent;\n          _context.next = 5;\n          return put({\n            type: 'HOME_INIT_SUCCESS',\n            payload: payload\n          });\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nfunction watchFetechHome() {\n  return _regeneratorRuntime.wrap(function watchFetechHome$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeEvery('HOME_INIT', fetechHome);\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this);\n} // Fetch data for userProfile\n\n\nfunction watchFetchProfile() {\n  return _regeneratorRuntime.wrap(function watchFetchProfile$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return takeEvery('GET_PROFILE', fetchProfile);\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, this);\n}\n\nfunction fetchProfile(action) {\n  var url, payload;\n  return _regeneratorRuntime.wrap(function fetchProfile$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          url = theUrl + '/userProfile';\n          _context4.next = 3;\n          return fetch(url, {\n            headers: tokenHeaders(localStorage.getItem(\"token\")),\n            method: 'POST',\n            body: JSON.stringify({\n              username: action.username\n            })\n          }).then(function (res) {\n            return res.json();\n          });\n\n        case 3:\n          payload = _context4.sent;\n          _context4.next = 6;\n          return put({\n            type: 'GET_PROFILE_SUCCESS',\n            payload: payload[0]\n          });\n\n        case 6:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, this);\n}\n\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return all([watchFetechHome(), watchFetchProfile()]);\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, this);\n}","map":{"version":3,"sources":["/home/dd/Desktop/nangua/frontend/src/content/sagas.js"],"names":["fetechHome","watchFetechHome","watchFetchProfile","fetchProfile","rootSaga","put","takeEvery","all","call","take","theUrl","tokenHeaders","fetchData","payload","type","action","url","fetch","headers","localStorage","getItem","method","body","JSON","stringify","username","then","res","json"],"mappings":";;;;yBAKUA,U;;;yBAIAC,e;;;yBAKAC,iB;;;yBAIAC,Y;;;yBAeeC,Q;;AAjCzB,SAASC,GAAT,EAAcC,SAAd,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoCC,IAApC,QAAgD,oBAAhD;AACA,SAASC,MAAT,EAAiBC,YAAjB,QAAqC,YAArC;AACA,OAAOC,SAAP,MAAsB,OAAtB,C,CAEA;;AACA,SAAUZ,UAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACkB,iBAAMQ,IAAI,CAACI,SAAD,CAAV;;AADlB;AACQC,UAAAA,OADR;AAAA;AAEE,iBAAMR,GAAG,CAAC;AAACS,YAAAA,IAAI,EAAE,mBAAP;AAA4BD,YAAAA,OAAO,EAAEA;AAArC,WAAD,CAAT;;AAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAIA,SAAUZ,eAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,iBAAMK,SAAS,CAAC,WAAD,EAAcN,UAAd,CAAf;;AADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C,CAIA;;;AACA,SAAUE,iBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,iBAAMI,SAAS,CAAC,aAAD,EAAgBH,YAAhB,CAAf;;AADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAIA,SAAUA,YAAV,CAAuBY,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,UAAAA,GADR,GACcN,MAAM,GAAG,cADvB;AAAA;AAEkB,iBAAMO,KAAK,CAACD,GAAD,EAAM;AAC/BE,YAAAA,OAAO,EAAEP,YAAY,CAACQ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CADU;AAE/BC,YAAAA,MAAM,EAAE,MAFuB;AAG/BC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,cAAAA,QAAQ,EAAEV,MAAM,CAACU;AADE,aAAf;AAHyB,WAAN,CAAL,CAMnBC,IANmB,CAMb,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,WANU,CAAN;;AAFlB;AAEQf,UAAAA,OAFR;AAAA;AAYE,iBAAMR,GAAG,CAAC;AAAES,YAAAA,IAAI,EAAE,qBAAR;AAA+BD,YAAAA,OAAO,EAAEA,OAAO,CAAC,CAAD;AAA/C,WAAD,CAAT;;AAZF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAeA,eAAe,SAAUT,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,iBAAMG,GAAG,CAAC,CACRN,eAAe,EADP,EAERC,iBAAiB,EAFT,CAAD,CAAT;;AADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { put, takeEvery, all, call, take } from 'redux-saga/effects'\nimport { theUrl, tokenHeaders } from 'selfConfig'\nimport fetchData from './api'\n\n// Fetch data generate list\nfunction* fetechHome() {\n  const payload = yield call(fetchData)\n  yield put({type: 'HOME_INIT_SUCCESS', payload: payload })\n}\nfunction* watchFetechHome() {\n    yield takeEvery('HOME_INIT', fetechHome)\n}\n\n// Fetch data for userProfile\nfunction* watchFetchProfile() {\n  yield takeEvery('GET_PROFILE', fetchProfile)\n}\n\nfunction* fetchProfile(action) {\n  const url = theUrl + '/userProfile'\n  const payload = yield fetch(url, {\n    headers: tokenHeaders(localStorage.getItem(\"token\")),\n    method: 'POST',\n    body: JSON.stringify({\n      username: action.username\n    })\n  }).then( res => res.json() )\n  \n  // case res will return an ArrayBuffer, so the first item in array is what I WebAuthentication\n  // payload: payload[0]\n  yield put({ type: 'GET_PROFILE_SUCCESS', payload: payload[0] })\n}\n\nexport default function* rootSaga() {\n  yield all([\n    watchFetechHome(),\n    watchFetchProfile()\n  ])\n}"]},"metadata":{},"sourceType":"module"}