{"ast":null,"code":"import _classCallCheck from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dd/Desktop/nangua/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/dd/Desktop/nangua/frontend/src/content/container/public_component/index.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Route } from 'react-router-dom';\nimport { Button, Upload, Icon } from 'antd';\nimport { theUrl } from 'selfConfig'; // use this button to log out.\n\nvar logoutButton = function logoutButton(props) {\n  var logout = function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('level');\n    localStorage.removeItem('username');\n    localStorage.removeItem('id');\n    props.dispatch({\n      type: 'LOGOUT'\n    });\n  };\n\n  return React.createElement(Button, {\n    type: \"danger\",\n    onClick: logout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, \"logout\");\n};\n\nvar LogoutButton = connect()(logoutButton); // HOC, get url string from route\n\nvar PreRoute = function PreRoute(_ref) {\n  var match = _ref.match,\n      route = _ref.route;\n  return React.createElement(Route, {\n    path: \"\".concat(match.url) + route.path,\n    component: route.component,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  });\n}; // Upload avatar\n\n\nvar uploadButton = React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 37\n  },\n  __self: this\n}, React.createElement(Icon, {\n  type: false ? 'loading' : 'plus',\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 38\n  },\n  __self: this\n}), React.createElement(\"div\", {\n  className: \"ant-upload-text\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 39\n  },\n  __self: this\n}, \"Upload\"));\n\nvar UploadAvatar = function UploadAvatar(props) {\n  return React.createElement(Upload, Object.assign({}, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), React.createElement(Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    type: \"upload\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), \"Upload\"));\n};\n\nfunction getBase64(img, callback) {\n  var reader = new FileReader();\n  reader.addEventListener('load', function () {\n    return callback(reader.result);\n  });\n  reader.readAsDataURL(img);\n}\n\nfunction beforeUpload(file) {\n  var isJPG = file.type === 'image/jpeg';\n\n  if (!isJPG) {\n    message.error('You can only upload JPG file!');\n  }\n\n  var isLt2M = file.size / 1024 / 1024 < 2;\n\n  if (!isLt2M) {\n    message.error('Image must smaller than 2MB!');\n  }\n\n  return isJPG && isLt2M;\n}\n\nvar Avatar =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Avatar, _React$Component);\n\n  function Avatar(props) {\n    var _this;\n\n    _classCallCheck(this, Avatar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Avatar).call(this, props));\n    _this.state = {\n      loading: false\n    };\n\n    _this.handleChange = function (info) {\n      if (info.file.status === 'uploading') {\n        _this.setState({\n          loading: true\n        });\n\n        return;\n      }\n\n      if (info.file.status === 'done') {\n        // Get this url from response in real world.\n        getBase64(info.file.originFileObj, function (imageUrl) {\n          return _this.setState({\n            imageUrl: imageUrl,\n            loading: false\n          });\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Avatar, [{\n    key: \"render\",\n    value: function render() {\n      var uploadButton = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        type: this.state.loading ? 'loading' : 'plus',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"ant-upload-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Upload\"));\n      var imageUrl = this.state.imageUrl;\n      return React.createElement(Upload, {\n        name: \"wechat\",\n        listType: \"picture-card\",\n        className: \"avatar-uploader\",\n        showUploadList: false,\n        action: theUrl + \"/upload\",\n        beforeUpload: beforeUpload,\n        onChange: this.handleChange,\n        data: {\n          username: this.props.username\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, imageUrl ? React.createElement(\"img\", {\n        src: imageUrl,\n        alt: \"avatar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }) : uploadButton);\n    }\n  }]);\n\n  return Avatar;\n}(React.Component); // package all compoents\n\n\nexport { LogoutButton, PreRoute, UploadAvatar };","map":{"version":3,"sources":["/home/dd/Desktop/nangua/frontend/src/content/container/public_component/index.js"],"names":["React","connect","Route","Button","Upload","Icon","theUrl","logoutButton","props","logout","localStorage","removeItem","dispatch","type","LogoutButton","PreRoute","match","route","url","path","component","uploadButton","UploadAvatar","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","beforeUpload","file","isJPG","message","error","isLt2M","size","Avatar","state","loading","handleChange","info","status","setState","originFileObj","imageUrl","username","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,IAAzB,QAAqC,MAArC;AAEA,SAASC,MAAT,QAAuB,YAAvB,C,CAEA;;AACA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,KAAK,EAAI;AAC1B,MAAMC,MAAM,GAAG,SAATA,MAAS,GAAM;AACjBC,IAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,IAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,IAAAA,YAAY,CAACC,UAAb,CAAwB,UAAxB;AACAD,IAAAA,YAAY,CAACC,UAAb,CAAwB,IAAxB;AACAH,IAAAA,KAAK,CAACI,QAAN,CAAe;AACXC,MAAAA,IAAI,EAAE;AADK,KAAf;AAGH,GARD;;AASA,SACI,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAEJ,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ;AAGH,CAbD;;AAcA,IAAMK,YAAY,GAAIb,OAAO,GAAGM,YAAH,CAA7B,C,CAGA;;AACA,IAAMQ,QAAQ,GAAG,SAAXA,QAAW;AAAA,MAAGC,KAAH,QAAGA,KAAH;AAAA,MAAUC,KAAV,QAAUA,KAAV;AAAA,SACb,oBAAC,KAAD;AACI,IAAA,IAAI,EAAE,UAAGD,KAAK,CAACE,GAAT,IAAeD,KAAK,CAACE,IAD/B;AAEI,IAAA,SAAS,EAAEF,KAAK,CAACG,SAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADa;AAAA,CAAjB,C,CAQA;;;AACA,IAAMC,YAAY,GACd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACE,oBAAC,IAAD;AAAM,EAAA,IAAI,EAAE,QAAQ,SAAR,GAAoB,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EADF,EAEE;AAAK,EAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,CADJ;;AAMA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACd,KAAD;AAAA,SACjB,oBAAC,MAAD,oBAAYA,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,WADJ,CADiB;AAAA,CAArB;;AAQA,SAASe,SAAT,CAAmBC,GAAnB,EAAwBC,QAAxB,EAAkC;AAC9B,MAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,EAAAA,MAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC;AAAA,WAAMH,QAAQ,CAACC,MAAM,CAACG,MAAR,CAAd;AAAA,GAAhC;AACAH,EAAAA,MAAM,CAACI,aAAP,CAAqBN,GAArB;AACD;;AAED,SAASO,YAAT,CAAsBC,IAAtB,EAA4B;AAC1B,MAAMC,KAAK,GAAGD,IAAI,CAACnB,IAAL,KAAc,YAA5B;;AACA,MAAI,CAACoB,KAAL,EAAY;AACVC,IAAAA,OAAO,CAACC,KAAR,CAAc,+BAAd;AACD;;AACD,MAAMC,MAAM,GAAGJ,IAAI,CAACK,IAAL,GAAY,IAAZ,GAAmB,IAAnB,GAA0B,CAAzC;;AACA,MAAI,CAACD,MAAL,EAAa;AACXF,IAAAA,OAAO,CAACC,KAAR,CAAc,8BAAd;AACD;;AACD,SAAOF,KAAK,IAAIG,MAAhB;AACD;;IAEKE,M;;;;;AACJ,kBAAY9B,KAAZ,EAAmB;AAAA;;AAAA;;AACf,gFAAMA,KAAN;AADe,UAGnB+B,KAHmB,GAGX;AACNC,MAAAA,OAAO,EAAE;AADH,KAHW;;AAAA,UAOnBC,YAPmB,GAOJ,UAACC,IAAD,EAAU;AACvB,UAAIA,IAAI,CAACV,IAAL,CAAUW,MAAV,KAAqB,WAAzB,EAAsC;AACpC,cAAKC,QAAL,CAAc;AAAEJ,UAAAA,OAAO,EAAE;AAAX,SAAd;;AACA;AACD;;AACD,UAAIE,IAAI,CAACV,IAAL,CAAUW,MAAV,KAAqB,MAAzB,EAAiC;AAC/B;AACApB,QAAAA,SAAS,CAACmB,IAAI,CAACV,IAAL,CAAUa,aAAX,EAA0B,UAAAC,QAAQ;AAAA,iBAAI,MAAKF,QAAL,CAAc;AAC3DE,YAAAA,QAAQ,EAARA,QAD2D;AAE3DN,YAAAA,OAAO,EAAE;AAFkD,WAAd,CAAJ;AAAA,SAAlC,CAAT;AAID;AACF,KAnBkB;;AAAA;AAElB;;;;6BAmBQ;AACP,UAAMnB,YAAY,GAChB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAE,KAAKkB,KAAL,CAAWC,OAAX,GAAqB,SAArB,GAAiC,MAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,CADF;AAMA,UAAMM,QAAQ,GAAG,KAAKP,KAAL,CAAWO,QAA5B;AACA,aACE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,QAAQ,EAAC,cAFX;AAGE,QAAA,SAAS,EAAC,iBAHZ;AAIE,QAAA,cAAc,EAAE,KAJlB;AAKE,QAAA,MAAM,EAAExC,MAAM,GAAC,SALjB;AAME,QAAA,YAAY,EAAEyB,YANhB;AAOE,QAAA,QAAQ,EAAE,KAAKU,YAPjB;AAQE,QAAA,IAAI,EAAE;AAACM,UAAAA,QAAQ,EAAE,KAAKvC,KAAL,CAAWuC;AAAtB,SARR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAUGD,QAAQ,GAAG;AAAK,QAAA,GAAG,EAAEA,QAAV;AAAoB,QAAA,GAAG,EAAC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAH,GAAyCzB,YAVpD,CADF;AAcD;;;;EA5CkBrB,KAAK,CAACgD,S,GA+C7B;;;AACA,SACIlC,YADJ,EAEIC,QAFJ,EAGIO,YAHJ","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { Route } from 'react-router-dom'\nimport { Button, Upload, Icon } from 'antd'\n\nimport { theUrl } from 'selfConfig'\n\n// use this button to log out.\nconst logoutButton = props => {\n    const logout = () => {\n        localStorage.removeItem('token')\n        localStorage.removeItem('level')\n        localStorage.removeItem('username')\n        localStorage.removeItem('id')\n        props.dispatch({\n            type: 'LOGOUT'\n        })\n    }\n    return(\n        <Button type=\"danger\" onClick={logout}>logout</Button>\n    )\n}\nconst LogoutButton =  connect()(logoutButton)\n\n\n// HOC, get url string from route\nconst PreRoute = ({ match, route}) => (\n    <Route \n        path={`${match.url}`+route.path}\n        component={route.component}\n    />\n)\n\n\n// Upload avatar\nconst uploadButton = (\n    <div>\n      <Icon type={false ? 'loading' : 'plus'} />\n      <div className=\"ant-upload-text\">Upload</div>\n    </div>\n);\nconst UploadAvatar = (props) => (\n    <Upload {...props}>\n        <Button>\n            <Icon type=\"upload\"/>Upload\n        </Button>\n    </Upload>\n)\n\nfunction getBase64(img, callback) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => callback(reader.result));\n    reader.readAsDataURL(img);\n  }\n  \n  function beforeUpload(file) {\n    const isJPG = file.type === 'image/jpeg';\n    if (!isJPG) {\n      message.error('You can only upload JPG file!');\n    }\n    const isLt2M = file.size / 1024 / 1024 < 2;\n    if (!isLt2M) {\n      message.error('Image must smaller than 2MB!');\n    }\n    return isJPG && isLt2M;\n  }\n  \n  class Avatar extends React.Component {\n    constructor(props) {\n        super(props)\n    }\n    state = {\n      loading: false,\n    };\n  \n    handleChange = (info) => {\n      if (info.file.status === 'uploading') {\n        this.setState({ loading: true });\n        return;\n      }\n      if (info.file.status === 'done') {\n        // Get this url from response in real world.\n        getBase64(info.file.originFileObj, imageUrl => this.setState({\n          imageUrl,\n          loading: false,\n        }));\n      }\n    }\n  \n    render() {\n      const uploadButton = (\n        <div>\n          <Icon type={this.state.loading ? 'loading' : 'plus'} />\n          <div className=\"ant-upload-text\">Upload</div>\n        </div>\n      );\n      const imageUrl = this.state.imageUrl;\n      return (\n        <Upload\n          name=\"wechat\"\n          listType=\"picture-card\"\n          className=\"avatar-uploader\"\n          showUploadList={false}\n          action={theUrl+\"/upload\"}\n          beforeUpload={beforeUpload}\n          onChange={this.handleChange}\n          data={{username: this.props.username}}\n        >\n          {imageUrl ? <img src={imageUrl} alt=\"avatar\" /> : uploadButton}\n        </Upload>\n      );\n    }\n  }\n\n// package all compoents\nexport { \n    LogoutButton,\n    PreRoute,\n    UploadAvatar\n}\n"]},"metadata":{},"sourceType":"module"}